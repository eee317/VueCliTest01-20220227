"use strict";(self["webpackChunkkitty_home"]=self["webpackChunkkitty_home"]||[]).push([[269],{5269:function(t,e,l){l.r(e),l.d(e,{default:function(){return at}});var a=l(6252),o=l(3577),s=l(9963),d=l(5906);const n=t=>((0,a.dD)("data-v-bf9ab674"),t=t(),(0,a.Cn)(),t),i={key:0},c=n((()=>(0,a._)("div",{class:"p-3 p-md-5 d-flex justify-content-center align-items-center flex-column text-center lh-lg"},[(0,a._)("h2",{class:"text-secondary"},"尚未加入捐款款項"),(0,a._)("p",{class:"text-secondary"},"加入捐款款項，才能完成後續的捐款動作唷！")],-1))),r=n((()=>(0,a._)("img",{class:"img-fluid",src:d,alt:""},null,-1))),u=(0,a.Uk)("查看捐款款項"),h={key:1,class:"my-4"},p={class:"table mb-5"},m=n((()=>(0,a._)("thead",{class:"fs-5 text-primary"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"}),(0,a._)("th",{scope:"col"},"捐款品項"),(0,a._)("th",{scope:"col"},"數量"),(0,a._)("th",{scope:"col"},"單價"),(0,a._)("th",{scope:"col"},"金額")])],-1))),_={scope:"row"},b=["onClick"],C={href:"#"},f=["onClick"],y={class:"d-inline p-3 text-primary"},v={href:"#"},g=["onClick"],k={class:"fs-5 text-success"},M=n((()=>(0,a._)("td",null,null,-1))),x=n((()=>(0,a._)("td",null,null,-1))),w=n((()=>(0,a._)("td",null,null,-1))),D=n((()=>(0,a._)("td",null,"捐款總額",-1))),A=(0,a.Uk)("返回捐款款項"),I=(0,a.Uk)("下一步");function $(t,e,l,d,n,$){const Z=(0,a.up)("router-link"),z=(0,a.up)("deleteCartItemModal"),W=(0,a.up)("deleteCaerAllModal");return 0===n.cartData?.carts?.length?((0,a.wg)(),(0,a.iD)("div",i,[c,r,(0,a.Wm)(Z,{type:"button",class:"btn btn-primary mt-1 d-flex justify-content-center align-items-center flex-column text-center lh-lg",to:"/donate"},{default:(0,a.w5)((()=>[u])),_:1})])):((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary css-button my-3 float-end",onClick:e[0]||(e[0]=(...t)=>$.deleteCartAll&&$.deleteCartAll(...t))},"刪除全部"),(0,a._)("table",p,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.cartData.carts,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t.product.id},[(0,a._)("tr",null,[(0,a._)("th",_,[(0,a._)("i",{class:"bi bi-trash3-fill",onClick:e=>$.deleteCartItem(t.id,t.product.title),style:{cursor:"pointer"}},null,8,b)]),(0,a._)("td",null,(0,o.zw)(t.product.title),1),(0,a._)("td",null,[(0,a._)("a",C,[(0,a._)("span",{class:"bi bi-dash",onClick:(0,s.iM)((e=>$.editCartItem(t,"reduceOne",t.qty)),["prevent"])},null,8,f)]),(0,a._)("div",y,(0,o.zw)(t.qty),1),(0,a._)("a",v,[(0,a._)("span",{class:"bi bi-plus-lg",onClick:(0,s.iM)((e=>$.editCartItem(t,"addOne",t.qty)),["prevent"])},null,8,g)])]),(0,a._)("td",null,(0,o.zw)(t.product.price),1),(0,a._)("td",null,(0,o.zw)(t.total),1)])])))),128)),(0,a._)("tfoot",k,[(0,a._)("tr",null,[M,x,w,D,(0,a._)("td",null,(0,o.zw)(n.cartData.total),1)])])]),(0,a.Wm)(z,{item:n.productTitle,ref:"deleteCartItemModal",onGetCart:$.getCart},null,8,["item","onGetCart"]),(0,a.Wm)(W,{ref:"deleteCartAllModal",onGetCart:$.getCart},null,8,["onGetCart"]),(0,a.Wm)(Z,{type:"button",class:"btn btn-primary",to:"/donate"},{default:(0,a.w5)((()=>[A])),_:1}),(0,a.Wm)(Z,{class:(0,o.C_)([{disabled:0===n.cartData?.carts?.length},"btn btn-primary float-end"]),type:"button",to:"/cart/form",onClick:e[1]||(e[1]=t=>$.clickNext("form"))},{default:(0,a.w5)((()=>[I])),_:1},8,["class"])]))}var Z=l(1530);const z={class:"modal",tabindex:"-1",ref:"deleteModal",id:"deleteCartItemModal"},W={class:"modal-dialog"},q={class:"modal-content"},G=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"已刪除"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body"},N={class:"text-center"},O={class:"modal-footer"};function T(t,e,l,s,d,n){return(0,a.wg)(),(0,a.iD)("div",z,[(0,a._)("div",W,[(0,a._)("div",q,[G,(0,a._)("div",j,[(0,a._)("div",N,(0,o.zw)(l.item),1)]),(0,a._)("div",O,[(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>n.hideModal&&n.hideModal(...t))},"我知道了")])])])],512)}var U=l(7424),Y=l.n(U),H={props:{item:{}},methods:{openModal(){this.modal.show()},hideModal(){this.$emit("get-cart"),this.modal.hide()}},mounted(){this.modal=new(Y())(this.$refs.deleteModal,{keyboard:!1})}},J=l(3744);const K=(0,J.Z)(H,[["render",T]]);var B=K;const E={class:"modal",tabindex:"-1",ref:"deleteAllModal",id:"deleteCartAllModal"},F={class:"modal-dialog"},L={class:"modal-content"},P={class:"modal-body"},Q=(0,a._)("div",{class:"text-center p-4"},[(0,a._)("h5",{class:"text-primary"}," 確定要刪除全部？ ")],-1),R={class:"d-flex justify-content-between mt-4"};function S(t,e,l,o,s,d){return(0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",F,[(0,a._)("div",L,[(0,a._)("div",P,[Q,(0,a._)("div",R,[(0,a._)("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>d.hideModal&&d.hideModal(...t))},"取消"),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>d.deleteCartAll&&d.deleteCartAll(...t))},"確定")])])])])],512)}var V={methods:{deleteCartAll(){const t="https://vue3-course-api.hexschool.io/v2/api/peiying/carts";this.$http.delete(t).then((t=>{Z.Z.emit("render-cart"),this.$emit("get-cart"),this.hideModal()})).catch((t=>{console.log(t)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(Y())(this.$refs.deleteAllModal,{keyboard:!1})}};const X=(0,J.Z)(V,[["render",S]]);var tt=X,et={components:{deleteCartItemModal:B,deleteCaerAllModal:tt},data(){return{cartData:[],productTitle:null}},mounted(){this.getCart()},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/peiying/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data,console.log(t)})).catch((t=>{console.log(t)}))},editCartItem(t,e,l){const a=l;let o={};if("reduceOne"===e){if(1===a)return this.deleteCartItem(t.id,t.product.title);o=a-1}else o=a+1;const s={product_id:t.id,qty:o},d=`https://vue3-course-api.hexschool.io/v2/api/peiying/cart/${t.id}`;this.$http.put(d,{data:s}).then((t=>{this.getCart(),Z.Z.emit("render-cart")})).catch((t=>{console.log(t)}))},deleteCartItem(t,e){const l=`https://vue3-course-api.hexschool.io/v2/api/peiying/cart/${t}`;this.$http.delete(l).then((t=>{this.productTitle=e,Z.Z.emit("render-cart");const l=this.$refs.deleteCartItemModal;l.openModal()})).catch((t=>{console.log(t)}))},deleteCartAll(){const t=this.$refs.deleteCartAllModal;t.openModal()},clickNext(t){Z.Z.emit("clickNext",t)}}};const lt=(0,J.Z)(et,[["render",$],["__scopeId","data-v-bf9ab674"]]);var at=lt},5906:function(t,e,l){t.exports=l.p+"img/notYetJoinedDonate.5baa4d22.svg"}}]);
//# sourceMappingURL=269.583ac34a.js.map