"use strict";(self["webpackChunkkitty_home"]=self["webpackChunkkitty_home"]||[]).push([[523],{1530:function(e,a,s){function l(e){return{all:e=e||new Map,on:function(a,s){var l=e.get(a);l?l.push(s):e.set(a,[s])},off:function(a,s){var l=e.get(a);l&&(s?l.splice(l.indexOf(s)>>>0,1):e.set(a,[]))},emit:function(a,s){var l=e.get(a);l&&l.slice().map((function(e){e(s)})),(l=e.get("*"))&&l.slice().map((function(e){e(a,s)}))}}}s.d(a,{Z:function(){return r}});const t=l();var r=t},1523:function(e,a,s){s.r(a),s.d(a,{default:function(){return ee}});var l=s(6252),t=s(3577),r=s(9963);const o={class:"card mb-5 ms-3 bg-light"},i={class:"card-body"},c=(0,l._)("h5",{class:"card-title text-primary"},"捐款金額",-1),n={class:"card-text text-secondary"},m={class:"card-text h6 text-primary mt-2"},u=(0,l._)("small",{class:"text-muted h6"},"捐款總金額 ",-1),d={class:"row mb-3"},p=(0,l._)("legend",{class:"col-form-label col-sm-2 pt-0"},[(0,l.Uk)("捐款單位 "),(0,l._)("span",{class:"text-danger"},"*")],-1),f={class:"col-sm-10"},y={class:"form-check"},_=(0,l._)("label",{class:"form-check-label",for:"gridRadios1"}," 公司行號 ",-1),h={class:"form-check"},v=(0,l._)("label",{class:"form-check-label",for:"gridRadios2"}," 個人 ",-1),b={class:"row mb-3"},D=(0,l._)("label",{for:"inputName",class:"col-sm-2 col-form-label"},[(0,l.Uk)("姓名 "),(0,l._)("span",{class:"text-danger"},"*")],-1),k={class:"col-sm-10"},g={class:"row mb-3"},V=(0,l._)("label",{for:"inputCompany",class:"col-sm-2 col-form-label"},[(0,l.Uk)("公司名稱 "),(0,l._)("span",{class:"text-danger"},"*")],-1),x={class:"col-sm-10"},w={class:"row mb-3"},C=(0,l._)("label",{for:"inputCompanyID",class:"col-sm-2 col-form-label"},[(0,l.Uk)("統編 "),(0,l._)("span",{class:"text-danger"},"*")],-1),U={class:"col-sm-10"},W={class:"row mb-3"},q=(0,l._)("label",{for:"email",class:"col-sm-2 col-form-label"},[(0,l.Uk)("Email "),(0,l._)("span",{class:"text-danger"},"*")],-1),N={class:"col-sm-10"},I={class:"row mb-3"},P=(0,l._)("label",{for:"inputPhone",class:"col-sm-2 col-form-label"},[(0,l.Uk)("公司電話 "),(0,l._)("span",{class:"text-danger"},"*")],-1),F={class:"col-sm-10"},$={class:"row mb-3"},z=(0,l._)("label",{for:"inputPhone",class:"col-sm-2 col-form-label"},[(0,l.Uk)("聯絡電話 "),(0,l._)("span",{class:"text-danger"},"*")],-1),E={class:"col-sm-10"},A={class:"row mb-3"},M=(0,l._)("label",{for:"inputAddress",class:"col-sm-2 col-form-label"},[(0,l.Uk)("捐款收據寄送地址 "),(0,l._)("span",{class:"text-danger"},"*")],-1),R={class:"col-sm-10"},Z={class:"row mb-3"},H=(0,l._)("label",{for:"method",class:"col-sm-2 col-form-label"},[(0,l.Uk)("捐款方式 "),(0,l._)("span",{class:"text-danger"},"*")],-1),T={class:"col-sm-10"},Y=(0,l._)("option",{selected:"",value:""},"捐款方式",-1),K=(0,l._)("option",{value:"信用卡"},"信用卡",-1),O=(0,l._)("option",{value:"ATM"},"ATM",-1),S=(0,l._)("option",{value:"超商代碼捐款"},"超商代碼捐款",-1),j=(0,l.Uk)("上一步"),B=(0,l._)("button",{type:"submit",class:"btn btn-primary float-end mb-5"},"下一步 結帳",-1);function G(e,a,s,G,J,L){const Q=(0,l.up)("FieldValidate"),X=(0,l.up)("ErrorMessage"),ee=(0,l.up)("router-link"),ae=(0,l.up)("FormValidate");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",o,[(0,l._)("div",i,[c,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(J.cartData.carts,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id+"cartForm"},[(0,l._)("p",n,(0,t.zw)(e.product.title)+" "+(0,t.zw)(e.qty)+" "+(0,t.zw)(e.product.unit)+" "+(0,t.zw)(e.total)+"元",1)])))),128)),(0,l._)("p",m,[u,(0,l.Uk)(" "+(0,t.zw)(J.cartData.total),1)])])]),(0,l.Wm)(ae,{ref:"form",onSubmit:a[11]||(a[11]=e=>L.clickNext("payment")),class:"text-primary ms-3"},{default:(0,l.w5)((({errors:e})=>[(0,l._)("fieldset",d,[p,(0,l._)("div",f,[(0,l._)("div",y,[(0,l.Wm)(Q,{class:(0,t.C_)(["form-check-input",{"is-invalid":e["捐款單位"]}]),type:"radio",name:"捐款單位",id:"gridRadios1",value:"company",modelValue:J.userData.user.identity,"onUpdate:modelValue":a[0]||(a[0]=e=>J.userData.user.identity=e),rules:"required"},null,8,["modelValue","class"]),_]),(0,l._)("div",h,[(0,l.Wm)(Q,{class:(0,t.C_)(["form-check-input",{"is-invalid":e["捐款單位"]}]),type:"radio",name:"捐款單位",id:"gridRadios2",value:"personal",modelValue:J.userData.user.identity,"onUpdate:modelValue":a[1]||(a[1]=e=>J.userData.user.identity=e),rules:"required"},null,8,["modelValue","class"]),v,(0,l.Wm)(X,{name:"捐款單位",class:"invalid-feedback"})])])]),(0,l._)("div",b,[D,(0,l._)("div",k,[(0,l.Wm)(Q,{name:"姓名",class:(0,t.C_)([{"is-invalid":e["姓名"]},"form-control"]),rules:"required",type:"text",id:"inputName",modelValue:J.userData.user.name,"onUpdate:modelValue":a[2]||(a[2]=e=>J.userData.user.name=e)},null,8,["class","modelValue"]),(0,l.Wm)(X,{name:"姓名",class:"invalid-feedback"})])]),(0,l.wy)((0,l._)("div",g,[V,(0,l._)("div",x,[(0,l.Wm)(Q,{name:"公司名稱",class:(0,t.C_)([{"is-invalid":e["公司名稱"]},"form-control"]),rules:{required:"company"===J.userData.user.identity},type:"text",id:"inputCompany",modelValue:J.userData.user.companyName,"onUpdate:modelValue":a[3]||(a[3]=e=>J.userData.user.companyName=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(X,{name:"公司名稱",class:"invalid-feedback"})])],512),[[r.F8,"company"===J.userData.user.identity]]),(0,l.wy)((0,l._)("div",w,[C,(0,l._)("div",U,[(0,l.Wm)(Q,{name:"統編",class:(0,t.C_)([{"is-invalid":e["公司名稱"]},"form-control"]),rules:{required:"company"===J.userData.user.identity},type:"number",id:"inputCompanyID",modelValue:J.userData.user.companyID,"onUpdate:modelValue":a[4]||(a[4]=e=>J.userData.user.companyID=e)},null,8,["class","rules","modelValue"]),(0,l.Wm)(X,{name:"統編",class:"invalid-feedback"})])],512),[[r.F8,"company"===J.userData.user.identity]]),(0,l._)("div",W,[q,(0,l._)("div",N,[(0,l.Wm)(Q,{name:"Email",class:(0,t.C_)([{"is-invalid":e["Email"]},"form-control"]),rules:"email|required",type:"email",id:"email",modelValue:J.userData.user.email,"onUpdate:modelValue":a[5]||(a[5]=e=>J.userData.user.email=e)},null,8,["class","modelValue"]),(0,l.Wm)(X,{name:"Email",class:"invalid-feedback"})])]),(0,l.wy)((0,l._)("div",I,[P,(0,l._)("div",F,[(0,l.Wm)(Q,{name:"公司電話",class:(0,t.C_)([{"is-invalid":e["公司電話"]},"form-control"]),rules:{required:"company"===J.userData.user.identity},type:"tel",id:"inputPhone",modelValue:J.userData.user.companyPhone,"onUpdate:modelValue":a[6]||(a[6]=e=>J.userData.user.companyPhone=e)},null,8,["class","rules","modelValue"])])],512),[[r.F8,"company"===J.userData.user.identity]]),(0,l._)("div",$,[z,(0,l._)("div",E,[(0,l.Wm)(Q,{name:"聯絡電話",class:(0,t.C_)([{"is-invalid":e["聯絡電話"]},"form-control"]),rules:"required",type:"tel",id:"inputPhone",modelValue:J.userData.user.tel,"onUpdate:modelValue":a[7]||(a[7]=e=>J.userData.user.tel=e)},null,8,["class","modelValue"]),(0,l.Wm)(X,{name:"聯絡電話",class:"invalid-feedback"})])]),(0,l._)("div",A,[M,(0,l._)("div",R,[(0,l.Wm)(Q,{name:"捐款收據寄送地址",class:(0,t.C_)([{"is-invalid":e["捐款收據寄送地址"]},"form-control"]),rules:"required",type:"tel",id:"inputAddress",modelValue:J.userData.user.address,"onUpdate:modelValue":a[8]||(a[8]=e=>J.userData.user.address=e)},null,8,["class","modelValue"]),(0,l.Wm)(X,{name:"捐款收據寄送地址",class:"invalid-feedback"})])]),(0,l._)("div",Z,[H,(0,l._)("div",T,[(0,l.Wm)(Q,{modelValue:J.userData.user.method,"onUpdate:modelValue":a[9]||(a[9]=e=>J.userData.user.method=e),as:"select",name:"捐款方式",class:(0,t.C_)([{"is-invalid":e["捐款方式"]},"form-select text-primary"]),rules:"required","aria-label":"Default select example",id:"method"},{default:(0,l.w5)((()=>[Y,K,O,S])),_:2},1032,["modelValue","class"]),(0,l.Wm)(X,{name:"捐款方式",class:"invalid-feedback"})])]),(0,l.Wm)(ee,{type:"button",class:"btn btn-primary mb-5",to:"/cart",onClick:a[10]||(a[10]=e=>L.clickNext("cart"))},{default:(0,l.w5)((()=>[j])),_:1}),B])),_:1},512)],64)}var J=s(1530),L={data(){return{cartData:{},userData:{user:{identity:"",companyPhone:"",companyName:"",companyID:"",name:"",email:"",tel:"",address:"",method:""},message:""},orderID:""}},mounted(){this.getCart()},methods:{clickNext(e){if("payment"===e){const a="https://vue3-course-api.hexschool.io/v2/api/peiying/order";this.$http.post(a,{data:this.userData}).then((a=>{console.log(a),this.formChack(),this.$refs.form.resetForm(),J.Z.emit("clickNext",e),this.$router.push(`/cart/payment/${a.data.orderId}`)})).catch((e=>{console.dir(e)}))}else J.Z.emit("clickNext",e)},getCart(){const e="https://vue3-course-api.hexschool.io/v2/api/peiying/cart";this.$http.get(e).then((e=>{this.cartData=e.data.data,0===this.cartData?.carts?.length&&this.$router.push("/donate"),console.log(e)})).catch((e=>{console.log(e)}))},formChack(){"personal"===this.userData.user.identity&&(this.userData.user.companyPhone="",this.userData.user.companyName="",this.userData.user.companyID="")}}},Q=s(3744);const X=(0,Q.Z)(L,[["render",G]]);var ee=X}}]);
//# sourceMappingURL=523.a5e0566e.js.map